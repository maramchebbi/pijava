<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.Tooltip?>
<?import javafx.scene.effect.DropShadow?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.paint.Color?>

<AnchorPane prefHeight="800.0" prefWidth="1550" style="-fx-background-color: linear-gradient(to bottom right, #f0f9ff, #e0f2fe);" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="controllers.AjouterReclamationController">

    <!-- Form Container -->
    <VBox layoutY="100" spacing="25" AnchorPane.bottomAnchor="30" AnchorPane.leftAnchor="40" AnchorPane.rightAnchor="40">
        <!-- Form Card -->
        <VBox style="-fx-background-color: white; -fx-background-radius: 12; -fx-padding: 30;">
            <effect>
                <DropShadow>
                    <color>
                        <Color opacity="0.08" />
                    </color>
                    <radius>15</radius>
                </DropShadow>
            </effect>

            <VBox spacing="30">
                <!-- Progress Indicator -->
                <HBox alignment="CENTER" spacing="15" style="-fx-padding: 0 0 15 0;">
                    <VBox alignment="CENTER" HBox.hgrow="ALWAYS">
                        <HBox alignment="CENTER" />
                    </VBox>
                </HBox>

                <!-- Catégorie Field -->
                <VBox spacing="8">
                    <Label style="-fx-text-fill: #475569; -fx-font-size: 14; -fx-font-weight: bold;" styleClass="form-label" text="Catégorie de la réclamation" />
                    <ComboBox fx:id="optionCombo" prefHeight="45.0" prefWidth="300.0" promptText="Sélectionnez une catégorie" style="-fx-background-radius: 8; -fx-font-size: 14; -fx-border-color: #e2e8f0; -fx-border-radius: 8; -fx-background-color: #f8fafc;">
                        <tooltip>
                            <Tooltip text="Choisissez la catégorie qui correspond le mieux à votre réclamation" />
                        </tooltip>
                    </ComboBox>
                </VBox>

                <!-- Description Field -->
                <VBox spacing="8">
                    <Label style="-fx-text-fill: #475569; -fx-font-size: 14; -fx-font-weight: bold;" styleClass="form-label" text="Description détaillée" />
                    <TextArea fx:id="descriptionArea" prefHeight="180" promptText="Décrivez votre problème en détail..." style="-fx-background-radius: 8; -fx-padding: 12; -fx-font-size: 14; -fx-border-color: #e2e8f0; -fx-border-radius: 8; -fx-background-color: #f8fafc;" wrapText="true">
                        <tooltip>
                            <Tooltip text="Soyez précis dans votre description pour faciliter le traitement de votre réclamation" />
                        </tooltip>
                    </TextArea>
                </VBox>

                <!-- File Upload Section avec Drag & Drop -->
                <VBox spacing="8">
                    <Label style="-fx-text-fill: #475569; -fx-font-size: 14; -fx-font-weight: bold;" styleClass="form-label" text="Pièces justificatives" />

                    <!-- Zone de Drag & Drop -->
                    <VBox fx:id="dropZone" alignment="CENTER" prefHeight="120" spacing="15" style="-fx-border-color: #cbd5e1; -fx-border-style: dashed; -fx-border-radius: 8;                                  -fx-border-width: 2; -fx-background-color: #f8fafc; -fx-padding: 20;">
                        <ImageView fitHeight="40" fitWidth="40" preserveRatio="true">
                            <Image url="@/image/upload-icon.png" /> <!-- Remplacez par votre icône -->
                        </ImageView>
                        <VBox alignment="CENTER" spacing="5">
                            <Label style="-fx-text-fill: #334155; -fx-font-size: 14; -fx-font-weight: bold;" text="Glissez et déposez votre fichier ici" />
                            <Label style="-fx-text-fill: #64748b; -fx-font-size: 12;" text="ou utilisez le bouton ci-dessous" />
                        </VBox>
                        <Button fx:id="uploadButton" onAction="#handleUploadFile" style="-fx-background-color: #f1f5f9; -fx-text-fill: #334155;                                        -fx-background-radius: 8; -fx-padding: 10 20; -fx-cursor: hand; -fx-font-weight: bold;" text="Parcourir mon appareil">
                            <tooltip>
                                <Tooltip text="Formats acceptés: JPG, PNG, GIF, PDF" />
                            </tooltip>
                        </Button>
                    </VBox>

                    <!-- Prévisualisation du fichier sélectionné -->
                    <HBox fx:id="previewBox" alignment="CENTER_LEFT" managed="false" spacing="10" style="-fx-padding: 12; -fx-background-color: #f1f5f9; -fx-background-radius: 8; -fx-margin-top: 10;" visible="false">
                        <ImageView fitHeight="24" fitWidth="24" preserveRatio="true">
                            <Image url="@/image/document-icon.png" /> <!-- Remplacez par votre icône -->
                        </ImageView>
                        <Label fx:id="previewLabel" style="-fx-text-fill: #334155; -fx-font-size: 14;" HBox.hgrow="ALWAYS" />
                        <Button onAction="#handleRemoveFile" style="-fx-background-color: #fee2e2; -fx-text-fill: #ef4444; -fx-background-radius: 50; -fx-min-width: 28; -fx-min-height: 28; -fx-padding: 0; -fx-cursor: hand;" text="×">
                            <tooltip>
                                <Tooltip text="Supprimer ce fichier" />
                            </tooltip>
                        </Button>
                    </HBox>
                </VBox>
            </VBox>
        </VBox>

        <!-- Action Buttons -->
        <HBox alignment="CENTER_RIGHT" spacing="15">
            <Label fx:id="statusLabel" style="-fx-text-fill: #ef4444; -fx-font-size: 14;" HBox.hgrow="ALWAYS" />
            <Button onAction="#handleRetour" style="-fx-background-color: white; -fx-text-fill: #475569; -fx-border-color: #cbd5e1; -fx-border-radius: 8; -fx-background-radius: 8; -fx-padding: 12 25; -fx-cursor: hand; -fx-font-weight: bold;" text="Annuler" />
            <Button onAction="#handleAjouterReclamation" style="-fx-background-color: #3b82f6; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 8; -fx-padding: 12 25; -fx-cursor: hand;" text="Envoyer ma réclamation">
                <effect>
                    <DropShadow>
                        <color>
                            <Color opacity="0.2" />
                        </color>
                        <radius>5</radius>
                    </DropShadow>
                </effect>
            </Button>
        </HBox>

    </VBox>
</AnchorPane>
