<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.Tooltip?>
<?import javafx.scene.effect.DropShadow?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.paint.Color?>

<AnchorPane prefHeight="800.0" prefWidth="1550" style="-fx-background-color: #f5f0e1;" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="controllers.AjouterFrontReclamationController">
    <children>
        <BorderPane layoutX="0.0" layoutY="0.0" prefHeight="768.0" prefWidth="1024.0" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">


            <center>
                <!-- Form Container -->
                <VBox spacing="25" style="-fx-padding: 30px 40px;">
                    <HBox alignment="CENTER_LEFT" spacing="15">
                        <Label style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #8B4513;" text="Nouvelle réclamation">
                        </Label>

                        <Button onAction="#handleRetour" style="-fx-background-color: rgba(139,69,19,0.1); -fx-background-radius: 50%; -fx-cursor: hand;">
                            <graphic>
                                <ImageView fitHeight="24.0" fitWidth="24.0" preserveRatio="true">
                                    <image>
                                        <Image url="@image/122637.png" />
                                    </image>
                                </ImageView>
                            </graphic>
                            <effect>
                                <DropShadow height="5.0" radius="2.0" width="5.0">
                                    <color>
                                        <Color opacity="0.1" />
                                    </color>
                                </DropShadow>
                            </effect>
                            <tooltip>
                                <Tooltip text="Retour à la liste des réclamations" />
                            </tooltip>
                        </Button>
                    </HBox>

                    <!-- Form Card -->
                    <VBox style="-fx-background-color: #F5F5DC; -fx-background-radius: 12; -fx-padding: 30;">
                        <effect>
                            <DropShadow>
                                <color>
                                    <Color opacity="0.08" />
                                </color>
                                <radius>15</radius>
                            </DropShadow>
                        </effect>

                        <VBox spacing="30">
                            <!-- Catégorie Field -->
                            <VBox spacing="8">
                                <Label style="-fx-text-fill: #654321; -fx-font-size: 14; -fx-font-weight: bold;" text="Catégorie de la réclamation" />
                                <ComboBox fx:id="optionCombo" prefHeight="45.0" prefWidth="300.0" promptText="Sélectionnez une catégorie"
                                          style="-fx-background-radius: 8; -fx-font-size: 14; -fx-border-color: #D2B48C; -fx-border-radius: 8; -fx-background-color: #FAEBD7;">
                                    <tooltip>
                                        <Tooltip text="Choisissez la catégorie qui correspond le mieux à votre réclamation" />
                                    </tooltip>
                                </ComboBox>
                            </VBox>

                            <!-- Description Field -->
                            <VBox spacing="8">
                                <Label style="-fx-text-fill: #654321; -fx-font-size: 14; -fx-font-weight: bold;" text="Description détaillée" />
                                <TextArea fx:id="descriptionArea" prefHeight="180" promptText="Décrivez votre problème en détail..."
                                          style="-fx-background-radius: 8; -fx-padding: 12; -fx-font-size: 14; -fx-border-color: #D2B48C; -fx-border-radius: 8; -fx-background-color: #FAEBD7;"
                                          wrapText="true">
                                    <tooltip>
                                        <Tooltip text="Soyez précis dans votre description pour faciliter le traitement de votre réclamation" />
                                    </tooltip>
                                </TextArea>
                            </VBox>

                            <!-- File Upload Section avec Drag & Drop -->
                            <VBox spacing="8">
                                <Label style="-fx-text-fill: #654321; -fx-font-size: 14; -fx-font-weight: bold;" text="Pièces justificatives" />

                                <!-- Zone de Drag & Drop -->
                                <VBox fx:id="dropZone" alignment="CENTER" prefHeight="120" spacing="15"
                                      style="-fx-border-color: #D2B48C; -fx-border-style: dashed; -fx-border-radius: 8; -fx-border-width: 2; -fx-background-color: #F5F0E1; -fx-padding: 20;">
                                    <ImageView fitHeight="40" fitWidth="40" preserveRatio="true">
                                        <Image url="@image/upload-icon.png" /> <!-- Remplacez par votre icône -->
                                    </ImageView>
                                    <VBox alignment="CENTER" spacing="5">
                                        <Label style="-fx-text-fill: #8B4513; -fx-font-size: 14; -fx-font-weight: bold;" text="Glissez et déposez votre fichier ici" />
                                        <Label style="-fx-text-fill: #A0522D; -fx-font-size: 12;" text="ou utilisez le bouton ci-dessous" />
                                    </VBox>
                                    <Button fx:id="uploadButton" onAction="#handleUploadFile"
                                            style="-fx-background-color: #DEB887; -fx-text-fill: #8B4513; -fx-background-radius: 8; -fx-padding: 10 20; -fx-cursor: hand; -fx-font-weight: bold;"
                                            text="Parcourir mon appareil">
                                        <tooltip>
                                            <Tooltip text="Formats acceptés: JPG, PNG, GIF, PDF" />
                                        </tooltip>
                                    </Button>
                                </VBox>

                                <!-- Prévisualisation du fichier sélectionné -->
                                <HBox fx:id="previewBox" alignment="CENTER_LEFT" managed="false" spacing="10"
                                      style="-fx-padding: 12; -fx-background-color: #EEE8AA; -fx-background-radius: 8; -fx-margin-top: 10;" visible="false">
                                    <ImageView fitHeight="24" fitWidth="24" preserveRatio="true">
                                        <Image url="@image/document-icon.png" /> <!-- Remplacez par votre icône -->
                                    </ImageView>
                                    <Label fx:id="previewLabel" style="-fx-text-fill: #8B4513; -fx-font-size: 14;" HBox.hgrow="ALWAYS" />
                                    <Button onAction="#handleRemoveFile"
                                            style="-fx-background-color: #FFDAB9; -fx-text-fill: #B22222; -fx-background-radius: 50; -fx-min-width: 28; -fx-min-height: 28; -fx-padding: 0; -fx-cursor: hand;"
                                            text="×">
                                        <tooltip>
                                            <Tooltip text="Supprimer ce fichier" />
                                        </tooltip>
                                    </Button>
                                </HBox>
                            </VBox>
                        </VBox>
                    </VBox>

                    <!-- Action Buttons -->
                    <HBox alignment="CENTER_RIGHT" spacing="15">
                        <Label fx:id="statusLabel" style="-fx-text-fill: #B22222; -fx-font-size: 14;" HBox.hgrow="ALWAYS" />
                        <Button onAction="#handleRetour"
                                style="-fx-background-color: #F5F5DC; -fx-text-fill: #8B4513; -fx-border-color: #D2B48C; -fx-border-radius: 8; -fx-background-radius: 8; -fx-padding: 12 25; -fx-cursor: hand; -fx-font-weight: bold;"
                                text="Annuler" />
                        <Button onAction="#handleAjouterReclamation"
                                style="-fx-background-color: #8B4513; -fx-text-fill: #F5F5DC; -fx-font-weight: bold; -fx-background-radius: 8; -fx-padding: 12 25; -fx-cursor: hand;"
                                text="Envoyer ma réclamation">
                            <effect>
                                <DropShadow>
                                    <color>
                                        <Color opacity="0.2" />
                                    </color>
                                    <radius>5</radius>
                                </DropShadow>
                            </effect>
                        </Button>
                    </HBox>
                </VBox>
            </center>

            <bottom>
                <HBox alignment="CENTER_RIGHT" style="-fx-background-color: #EEE8AA; -fx-padding: 15px 30px; -fx-border-color: #D2B48C; -fx-border-width: 1px 0 0 0;" BorderPane.alignment="CENTER">
                    <Label style="-fx-text-fill: #8B4513; -fx-font-size: 13px;" text="© 2025 Artisfera - Tous droits réservés" />
                </HBox>
            </bottom>
        </BorderPane>
    </children>
</AnchorPane>