<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.scene.effect.*?>
<?import javafx.scene.paint.*?>
<?import javafx.geometry.*?>
<?import de.jensd.fx.glyphs.fontawesome.FontAwesomeIconView?>

<AnchorPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="controller.ShowOeuvres" style="-fx-background-color: white;">

    <!-- Structure principale en VBox pour avoir un layout vertical -->
    <VBox AnchorPane.topAnchor="0.0" AnchorPane.bottomAnchor="0.0"
          AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" spacing="0">

        <!-- Barre de navigation supérieure -->
        <HBox alignment="CENTER_LEFT" style="-fx-background-color: white; -fx-padding: 12 24; -fx-border-color: #efefef; -fx-border-width: 0 0 1 0;">
            <!-- Logo/Titre -->
            <StackPane>
                <Label text="CéramiqueArt" style="-fx-font-size: 18; -fx-font-weight: bold; -fx-text-fill: #e60023;"/>
            </StackPane>

            <!-- Espacement -->
            <Region HBox.hgrow="ALWAYS" />

            <!-- Boutons d'action -->
            <Button onAction="#handleAjouterOeuvre" style="-fx-background-color: #B96B25; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 24; -fx-padding: 8 16;">
                <graphic>
                    <HBox alignment="CENTER" spacing="6">
                        <FontAwesomeIconView glyphName="PLUS" size="14" style="-fx-fill: white;"/>
                        <Label text="Ajouter Œuvre" style="-fx-text-fill: white; -fx-font-weight: bold;"/>
                    </HBox>
                </graphic>
            </Button>

            <Region prefWidth="8" />

            <Button onAction="#handleWorkshopRedirect" style="-fx-background-color: #B96B25; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 24; -fx-padding: 8 16;">
                <graphic>
                    <HBox alignment="CENTER" spacing="6">
                        <FontAwesomeIconView glyphName="CALENDAR" size="14" style="-fx-fill: white;"/>
                        <Label text="Workshop" style="-fx-text-fill: white; -fx-font-weight: bold;"/>
                    </HBox>
                </graphic>
            </Button>

            <Region prefWidth="8" />

            <Button onAction="#affichercollectionaction" style="-fx-background-color: #B96B25; -fx-text-fill: white; -fx-background-radius: 24; -fx-padding: 8 16;">
                <graphic>
                    <HBox alignment="CENTER" spacing="6">
                        <FontAwesomeIconView glyphName="TH" size="14" style="-fx-fill: white;"/>
                        <Label text="Collections" style="-fx-text-fill: white;"/>
                    </HBox>
                </graphic>
            </Button>

            <!-- Avatar utilisateur -->
            <Region prefWidth="16" />
            <StackPane style="-fx-background-color: #f0f0f0; -fx-background-radius: 50; -fx-min-width: 36; -fx-min-height: 36; -fx-max-width: 36; -fx-max-height: 36;">
                <FontAwesomeIconView glyphName="USER" size="16" style="-fx-fill: #767676;"/>
            </StackPane>
        </HBox>

        <!-- Barre de recherche centrée -->
        <HBox alignment="CENTER" style="-fx-background-color: white; -fx-padding: 12 0 16 0;">
            <HBox alignment="CENTER_LEFT" style="-fx-background-color: #f0f0f0; -fx-background-radius: 24; -fx-padding: 6 16; -fx-max-width: 600; -fx-pref-width: 600;">
                <!-- Search Field -->
                <TextField fx:id="searchField" promptText="Rechercher des oeuvres..."
                           style="-fx-background-color: transparent; -fx-prompt-text-fill: #767676; -fx-text-fill: #333333; -fx-focus-color: transparent; -fx-faint-focus-color: transparent; -fx-font-size: 14px; -fx-padding: 4 8; -fx-pref-width: 550;"/>
            </HBox>
        </HBox>

        <!-- Remplacé la barre de filtres par une version avec ComboBox -->
        <HBox fx:id="filterContainer" alignment="CENTER" spacing="24" style="-fx-background-color: white; -fx-padding: 16; -fx-border-color: #efefef; -fx-border-width: 0 0 1 0;">
            <!-- Filter area - ComboBoxes will be added dynamically -->

            <!-- Type Filter -->
            <HBox alignment="CENTER_LEFT" spacing="8">
                <Label text="Type:" style="-fx-font-weight: bold; -fx-text-fill: #333333;"/>
                <ComboBox fx:id="typeComboBox" prefWidth="180" promptText="Tous les types"
                          style="-fx-background-color: white; -fx-border-color: #e0e0e0; -fx-border-radius: 4; -fx-padding: 5;"/>
            </HBox>

            <!-- Color Filter -->
            <HBox alignment="CENTER_LEFT" spacing="8">
                <Label text="Couleur:" style="-fx-font-weight: bold; -fx-text-fill: #333333;"/>
                <ComboBox fx:id="colorComboBox" prefWidth="180" promptText="Toutes les couleurs"
                          style="-fx-background-color: white; -fx-border-color: #e0e0e0; -fx-border-radius: 4; -fx-padding: 5;"/>
            </HBox>

            <!-- Material Filter -->
            <HBox alignment="CENTER_LEFT" spacing="8">
                <Label text="Matière:" style="-fx-font-weight: bold; -fx-text-fill: #333333;"/>
                <ComboBox fx:id="materialComboBox" prefWidth="180" promptText="Toutes les matières"
                          style="-fx-background-color: white; -fx-border-color: #e0e0e0; -fx-border-radius: 4; -fx-padding: 5;"/>
            </HBox>

            <!-- Reset Button -->
            <Button fx:id="resetFiltersButton" text="Réinitialiser"
                    style="-fx-background-color: #f8f8f8; -fx-border-color: #e0e0e0; -fx-border-radius: 4; -fx-padding: 6 12;"/>
        </HBox>

        <!-- Contenu principal: GridView Pinterest-style -->
        <ScrollPane fx:id="scrollPane" fitToWidth="true" hbarPolicy="NEVER"
                    style="-fx-background: white; -fx-background-color: white; -fx-padding: 0;" VBox.vgrow="ALWAYS">
            <FlowPane fx:id="imageContainer" hgap="18" vgap="24"
                      style="-fx-padding: 24; -fx-background-color: white;" alignment="CENTER">
                <!-- Le contenu sera ajouté dynamiquement par le contrôleur -->
            </FlowPane>
        </ScrollPane>
    </VBox>
</AnchorPane>