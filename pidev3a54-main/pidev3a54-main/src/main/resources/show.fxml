<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.scene.effect.*?>
<?import javafx.scene.paint.*?>
<?import javafx.geometry.*?>
<?import de.jensd.fx.glyphs.fontawesome.FontAwesomeIconView?>

<AnchorPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="controller.ShowOeuvres" style="-fx-background-color: white;">

    <!-- Structure principale en VBox pour avoir un layout vertical -->
    <VBox AnchorPane.topAnchor="0.0" AnchorPane.bottomAnchor="0.0"
          AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" spacing="0">

        <!-- Barre de navigation supérieure -->
        <HBox alignment="CENTER_LEFT" style="-fx-background-color: white; -fx-padding: 12 24; -fx-border-color: #efefef; -fx-border-width: 0 0 1 0;">
            <!-- Logo/Titre -->
            <StackPane>
                <Label text="CéramiqueArt" style="-fx-font-size: 18; -fx-font-weight: bold; -fx-text-fill: #e60023;"/>
            </StackPane>

            <!-- Espacement -->
            <Region HBox.hgrow="ALWAYS" />

            <!-- Boutons d'action -->
            <Button onAction="#handleAjouterOeuvre" style="-fx-background-color: #B96B25; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 24; -fx-padding: 8 16;">
                <graphic>
                    <HBox alignment="CENTER" spacing="6">
                        <FontAwesomeIconView glyphName="PLUS" size="14" style="-fx-fill: white;"/>
                        <Label text="Ajouter Œuvre" style="-fx-text-fill: white; -fx-font-weight: bold;"/>
                    </HBox>
                </graphic>
            </Button>

            <Region prefWidth="8" />

            <Button onAction="#handleWorkshopRedirect" style="-fx-background-color: #B96B25; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 24; -fx-padding: 8 16;">
                <graphic>
                    <HBox alignment="CENTER" spacing="6">
                        <FontAwesomeIconView glyphName="CALENDAR" size="14" style="-fx-fill: white;"/>
                        <Label text="Workshop" style="-fx-text-fill: white; -fx-font-weight: bold;"/>
                    </HBox>
                </graphic>
            </Button>

            <Region prefWidth="8" />

            <Button onAction="#affichercollectionaction" style="-fx-background-color: #B96B25; -fx-text-fill: white; -fx-background-radius: 24; -fx-padding: 8 16;">
                <graphic>
                    <HBox alignment="CENTER" spacing="6">
                        <FontAwesomeIconView glyphName="TH" size="14" style="-fx-fill: #333333;"/>
                        <Label text="Collections" style="-fx-text-fill: white;"/>
                    </HBox>
                </graphic>
            </Button>

            <!-- Avatar utilisateur -->
            <Region prefWidth="16" />
            <StackPane style="-fx-background-color: #f0f0f0; -fx-background-radius: 50; -fx-min-width: 36; -fx-min-height: 36; -fx-max-width: 36; -fx-max-height: 36;">
                <FontAwesomeIconView glyphName="USER" size="16" style="-fx-fill: #767676;"/>
            </StackPane>
        </HBox>

        <!-- Barre de recherche centrée -->
        <HBox alignment="CENTER" style="-fx-background-color: white; -fx-padding: 16;">
            <HBox alignment="CENTER" style="-fx-background-color: #efefef; -fx-background-radius: 24; -fx-padding: 8 16; -fx-pref-width: 600;">
                <FontAwesomeIconView glyphName="SEARCH" size="14" style="-fx-fill: #767676;"/>
                <Label text="Recherche" style="-fx-text-fill: #767676; -fx-font-size: 12;"/>
                <Region prefWidth="8" />
                <TextField fx:id="searchField" promptText="Rechercher des œuvres..." style="-fx-background-color: transparent; -fx-focus-color: transparent; -fx-faint-focus-color: transparent; -fx-pref-width: 350;"/>
            </HBox>
        </HBox>

        <!-- Barre de filtres -->
        <!-- Barre de filtres - with improved visibility -->
        <VBox style="-fx-background-color: white; -fx-border-color: #efefef; -fx-border-width: 0 0 1 0;">
            <ScrollPane hbarPolicy="NEVER" vbarPolicy="NEVER"
                        style="-fx-background-color: white; -fx-background: white;"
                        fitToWidth="true" prefHeight="70" minHeight="70">
                <HBox alignment="CENTER" style="-fx-background-color: white; -fx-padding: 8;">
                    <HBox fx:id="filterButtonsContainer" alignment="CENTER_LEFT" spacing="12" style="-fx-padding: 8 16;">
                        <!-- Les boutons seront ajoutés dynamiquement -->
                    </HBox>
                </HBox>
            </ScrollPane>
        </VBox>

        <!-- Contenu principal: GridView Pinterest-style -->
        <ScrollPane fx:id="scrollPane" fitToWidth="true" hbarPolicy="NEVER"
                    style="-fx-background: white; -fx-background-color: white; -fx-padding: 0;" VBox.vgrow="ALWAYS">
            <FlowPane fx:id="imageContainer" hgap="18" vgap="24"
                      style="-fx-padding: 24; -fx-background-color: white;" alignment="CENTER">
                <!-- Le contenu sera ajouté dynamiquement par le contrôleur -->
            </FlowPane>
        </ScrollPane>
    </VBox>
</AnchorPane>