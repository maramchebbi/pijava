<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.scene.shape.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.image.Image?>

<AnchorPane prefHeight="700.0" prefWidth="1000.0" xmlns="http://javafx.com/javafx/8" xmlns:fx="http://javafx.com/fxml/1" fx:controller="controllers.FrontUserController">
    <children>
        <!-- Background Image -->
        <ImageView fx:id="backgroundImage" fitHeight="700.0" fitWidth="1000.0" opacity="0.2" pickOnBounds="true" preserveRatio="false" />

        <!-- Header/Navbar -->
        <HBox fx:id="navbarContainer" alignment="CENTER_LEFT" layoutX="0.0" layoutY="0.0" prefHeight="70.0" prefWidth="1000.0" style="-fx-background-color: #2c3e50; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.3), 10, 0, 0, 1);">
            <children>
                <!-- Logo or Brand Name -->
                <Label text="Mon Application" textFill="WHITE">
                    <font>
                        <Font name="System Bold" size="20.0" />
                    </font>
                    <HBox.margin>
                        <Insets left="20.0" right="20.0" />
                    </HBox.margin>
                </Label>

                <!-- Navigation Links -->
                <Button fx:id="homeButton" mnemonicParsing="false" onAction="#handleHomeButton" style="-fx-background-color: transparent; -fx-text-fill: white; -fx-cursor: hand;" text="Accueil">
                    <font>
                        <Font size="14.0" />
                    </font>
                    <HBox.margin>
                        <Insets right="15.0" />
                    </HBox.margin>
                </Button>

                <Button fx:id="adminButton" mnemonicParsing="false" onAction="#handleAdminButton" style="-fx-background-color: transparent; -fx-text-fill: white; -fx-cursor: hand;" text="Administration" visible="false">
                    <font>
                        <Font size="14.0" />
                    </font>
                    <HBox.margin>
                        <Insets right="15.0" />
                    </HBox.margin>
                </Button>

                <Button fx:id="translationButton" mnemonicParsing="false" onAction="#handleTranslationButton" style="-fx-background-color: transparent; -fx-text-fill: white; -fx-cursor: hand;" text="Traduction">
                    <font>
                        <Font size="14.0" />
                    </font>
                    <HBox.margin>
                        <Insets right="15.0" />
                    </HBox.margin>
                </Button>

                <!-- Spacer to push user info to the right -->
                <Region HBox.hgrow="ALWAYS" />

                <!-- User Profile -->
                <HBox alignment="CENTER" spacing="10.0">
                    <children>
                        <StackPane>
                            <children>
                                <Circle fx:id="userAvatar" fill="#3498db" radius="20.0" stroke="#ffffff" strokeWidth="2.0" />
                                <Text fx:id="userInitials" fill="WHITE" strokeType="OUTSIDE" strokeWidth="0.0" text="JD">
                                    <font>
                                        <Font name="System Bold" size="14.0" />
                                    </font>
                                </Text>
                            </children>
                        </StackPane>
                        <VBox alignment="CENTER_LEFT">
                            <children>
                                <Label fx:id="userNameLabel" text="John Doe" textFill="WHITE">
                                    <font>
                                        <Font name="System Bold" size="14.0" />
                                    </font>
                                </Label>
                                <Label fx:id="userRoleLabel" text="Utilisateur" textFill="#e6e6e6">
                                    <font>
                                        <Font size="12.0" />
                                    </font>
                                </Label>
                            </children>
                        </VBox>
                        <MenuButton mnemonicParsing="false" style="-fx-background-color: transparent;">
                            <items>
                                <MenuItem mnemonicParsing="false" onAction="#handleVoirMonProfil" text="Mon Profil" />
                                <MenuItem mnemonicParsing="false" onAction="#handleLogout" text="Déconnexion" />
                            </items>
                            <graphic>
                                <Text fill="WHITE" strokeType="OUTSIDE" strokeWidth="0.0" text="▼">
                                    <font>
                                        <Font size="12.0" />
                                    </font>
                                </Text>
                            </graphic>
                        </MenuButton>
                    </children>
                    <HBox.margin>
                        <Insets right="20.0" />
                    </HBox.margin>
                </HBox>
            </children>
        </HBox>

        <!-- Main Content Area -->
        <VBox fx:id="mainContent" alignment="CENTER" layoutX="0.0" layoutY="70.0" prefHeight="550.0" prefWidth="1000.0" spacing="20.0" style="-fx-padding: 30px;">
            <!-- Le contenu sera chargé dynamiquement via le contrôleur -->
        </VBox>

        <!-- Floating Chat Button -->
        <Button fx:id="chatButton" layoutX="1500.0" layoutY="710.0" style="-fx-background-color: linear-gradient(to bottom right, #3498db, #2980b9); -fx-background-radius: 50%; -fx-min-width: 60px; -fx-min-height: 60px; -fx-cursor: hand; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.3), 10, 0, 0, 0);">
            <graphic>
                <ImageView fitHeight="28" fitWidth="28" preserveRatio="true">
                    <image>
                        <Image url="@image/chat_icon.png" />
                    </image>
                </ImageView>
            </graphic>
        </Button>
    </children>
</AnchorPane>